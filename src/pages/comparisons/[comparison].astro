---
import Layout from "../../layouts/Layout.astro";
import Main from "../../components/Main.astro";
import { AstroSeo } from '@astrolib/seo';

export const prerender = true;

// Comparison data is now defined inline in getStaticPaths function

export async function getStaticPaths() {
  try {
    const staticComparisons = {
    "tastebuddy-vs-allrecipes": {
      title: "TasteBuddy vs AllRecipes",
      competitor: "AllRecipes",
      description: "Compare TasteBuddy and AllRecipes recipe apps. See which recipe organizer app is better for meal planning, recipe import, and cooking features.",
      mainKeyword: "tastebuddy vs allrecipes",
      searchVolume: "2,400",
      features: {
        tastebuddy: {
          pros: [
            "AI-powered meal planning",
            "Automatic shopping lists", 
            "Recipe transformation for diets",
            "Photo recipe import",
            "Offline recipe access",
            "Digital cookbook creation"
          ],
          cons: [
            "Newer app with smaller recipe database",
            "Premium features require subscription"
          ],
          pricing: "Free with premium features at $4.99/month",
          rating: 4.8
        },
        competitor: {
          pros: [
            "Large recipe database",
            "User reviews and ratings",
            "Video instructions",
            "Community features"
          ],
          cons: [
            "No AI meal planning", 
            "Limited recipe organization",
            "Ads in free version",
            "No automatic shopping lists"
          ],
          pricing: "Free with ads, Premium at $1.99/month",
          rating: 4.2
        }
      }
    },
    "tastebuddy-vs-paprika": {
      title: "TasteBuddy vs Paprika Recipe Manager",
      competitor: "Paprika",
      description: "Complete comparison of TasteBuddy and Paprika recipe apps. Find the best recipe organizer for meal planning and recipe management.",
      mainKeyword: "tastebuddy vs paprika",
      searchVolume: "1,800",
      features: {
        tastebuddy: {
          pros: [
            "AI meal planning",
            "Smart recipe categorization",
            "Photo-to-recipe conversion", 
            "Automatic shopping lists",
            "Recipe transformation",
            "Cloud sync across devices"
          ],
          cons: [
            "Newer to market",
            "Learning AI preferences takes time"
          ],
          pricing: "Free with premium at $4.99/month",
          rating: 4.8
        },
        competitor: {
          pros: [
            "Established recipe manager",
            "Good web clipper",
            "Grocery list features",
            "Menu planning"
          ],
          cons: [
            "No AI features",
            "Manual organization required",
            "Limited meal planning intelligence",
            "Dated interface"
          ],
          pricing: "$4.99 one-time purchase",
          rating: 4.1
        }
      }
    },
    "tastebuddy-vs-yummly": {
      title: "TasteBuddy vs Yummly",
      competitor: "Yummly", 
      description: "Compare TasteBuddy and Yummly recipe apps. See which is better for AI meal planning, recipe organization, and cooking assistance.",
      mainKeyword: "tastebuddy vs yummly",
      searchVolume: "3,200",
      features: {
        tastebuddy: {
          pros: [
            "Advanced AI meal planning",
            "Recipe transformation for any diet",
            "Automatic shopping list generation",
            "Photo recipe import",
            "Digital cookbook sharing",
            "Offline access"
          ],
          cons: [
            "Smaller initial recipe database",
            "Premium features cost extra"
          ],
          pricing: "Free with premium at $4.99/month", 
          rating: 4.8
        },
        competitor: {
          pros: [
            "Large recipe collection",
            "Good search functionality",
            "Taste preferences",
            "Video content"
          ],
          cons: [
            "Limited meal planning features",
            "No recipe transformation",
            "Requires internet connection",
            "Complex interface"
          ],
          pricing: "Free with ads",
          rating: 4.0
        }
      }
    }
    };
    
    console.log(`Building comparison pages: ${Object.keys(staticComparisons).join(', ')}`);
    return Object.keys(staticComparisons).map(slug => ({
      params: { comparison: slug },
      props: { comparisonData: (staticComparisons as any)[slug] }
    }));
  } catch (error) {
    console.error('Error in getStaticPaths for comparisons:', error);
    // Return empty array to prevent build failure
    return [];
  }
}

const { comparison } = Astro.params;
const { comparisonData } = Astro.props;

if (!comparisonData) {
  return new Response(null, { status: 404 });
}

const structuredData = {
  "@context": "https://schema.org/",
  "@graph": [
    {
      "@type": "Article",
      "headline": `${comparisonData.title} - Recipe App Comparison`,
      "description": comparisonData.description,
      "author": {
        "@type": "Organization",
        "name": "TasteBuddy",
        "url": "https://taste-buddy.app"
      },
      "publisher": {
        "@type": "Organization", 
        "name": "TasteBuddy",
        "url": "https://taste-buddy.app"
      },
      "datePublished": "2025-01-15",
      "dateModified": "2025-01-15"
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": `What are the main differences between TasteBuddy and ${comparisonData.competitor}?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `TasteBuddy focuses on AI-powered meal planning and recipe transformation, while ${comparisonData.competitor} emphasizes recipe discovery and community features. Choose based on whether you want intelligent planning or a large recipe database.`
          }
        },
        {
          "@type": "Question",
          "name": `Can I import my recipes from ${comparisonData.competitor}?`,
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `TasteBuddy can import recipes from photos, URLs, and screenshots. You can manually transfer recipes from ${comparisonData.competitor} by sharing the recipe URL to TasteBuddy.`
          }
        },
        {
          "@type": "Question",
          "name": "Which app is better for meal planning?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": `TasteBuddy offers more advanced AI meal planning features including personalized weekly plans and automatic shopping lists. ${comparisonData.competitor} provides basic meal planning capabilities.`
          }
        }
      ]
    }
  ]
};
---

<AstroSeo
  title={`${comparisonData.title} - Recipe App Comparison 2025 | TasteBuddy`}
  description={comparisonData.description}
  openGraph={{
    title: `${comparisonData.title} - Recipe App Comparison`,
    description: comparisonData.description,
    images: [{ url: 'https://taste-buddy.app/images/screenshots.png' }],
  }}
/>

<Layout title={`${comparisonData.title} - Recipe App Comparison`}>
  <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  
  <Main>
    <article class="max-w-6xl mx-auto py-12">
      <header class="text-center mb-12">
        <h1 class="text-4xl sm:text-5xl font-bold text-white mb-6 leading-tight">
          {comparisonData.title}: Recipe App Comparison 2025
        </h1>
        <p class="text-xl text-gray-300 mb-8 max-w-4xl mx-auto">
          {comparisonData.description}
        </p>
      </header>

      <!-- Quick Comparison Table -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold text-white text-center mb-8">Quick Comparison</h2>
        <div class="overflow-x-auto">
          <table class="w-full bg-[#1C2513]/80 rounded-2xl border border-[#2A2D24]/30 overflow-hidden">
            <thead>
              <tr class="bg-[#2A2D24]/50">
                <th class="px-6 py-4 text-left text-white font-semibold">Feature</th>
                <th class="px-6 py-4 text-center text-white font-semibold">TasteBuddy</th>
                <th class="px-6 py-4 text-center text-white font-semibold">{comparisonData.competitor}</th>
              </tr>
            </thead>
            <tbody class="text-gray-300">
              <tr class="border-t border-[#2A2D24]/30">
                <td class="px-6 py-4 font-medium">AI Meal Planning</td>
                <td class="px-6 py-4 text-center">
                  <span class="text-[#00CE31]">✓ Advanced</span>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-red-400">✗ Not Available</span>
                </td>
              </tr>
              <tr class="border-t border-[#2A2D24]/30">
                <td class="px-6 py-4 font-medium">Automatic Shopping Lists</td>
                <td class="px-6 py-4 text-center">
                  <span class="text-[#00CE31]">✓ Smart Lists</span>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-yellow-400">~ Basic</span>
                </td>
              </tr>
              <tr class="border-t border-[#2A2D24]/30">
                <td class="px-6 py-4 font-medium">Recipe Transformation</td>
                <td class="px-6 py-4 text-center">
                  <span class="text-[#00CE31]">✓ Any Diet</span>
                </td>
                <td class="px-6 py-4 text-center">
                  <span class="text-red-400">✗ Not Available</span>
                </td>
              </tr>
              <tr class="border-t border-[#2A2D24]/30">
                <td class="px-6 py-4 font-medium">Pricing</td>
                <td class="px-6 py-4 text-center text-[#00CE31]">{comparisonData.features.tastebuddy.pricing}</td>
                <td class="px-6 py-4 text-center">{comparisonData.features.competitor.pricing}</td>
              </tr>
              <tr class="border-t border-[#2A2D24]/30">
                <td class="px-6 py-4 font-medium">User Rating</td>
                <td class="px-6 py-4 text-center">
                  <div class="flex justify-center items-center gap-1">
                    <span class="text-yellow-400">★★★★★</span>
                    <span class="text-white">{comparisonData.features.tastebuddy.rating}</span>
                  </div>
                </td>
                <td class="px-6 py-4 text-center">
                  <div class="flex justify-center items-center gap-1">
                    <span class="text-yellow-400">★★★★☆</span>
                    <span class="text-white">{comparisonData.features.competitor.rating}</span>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Detailed Feature Comparison -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold text-white text-center mb-8">Detailed Feature Analysis</h2>
        
        <div class="grid md:grid-cols-2 gap-8">
          <!-- TasteBuddy Features -->
          <div class="bg-[#1C2513]/80 rounded-2xl p-8 border border-[#00CE31]/30">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">TasteBuddy Pros & Cons</h3>
            
            <div class="mb-6">
              <h4 class="text-lg font-semibold text-[#00CE31] mb-4">✓ Advantages</h4>
                             <ul class="space-y-2">
                 {comparisonData.features.tastebuddy.pros.map((pro: string) => (
                   <li class="flex items-start gap-3 text-gray-300">
                     <span class="text-[#00CE31] mt-1">•</span>
                     <span>{pro}</span>
                   </li>
                 ))}
               </ul>
            </div>
            
            <div>
              <h4 class="text-lg font-semibold text-red-400 mb-4">⚠ Considerations</h4>
                             <ul class="space-y-2">
                 {comparisonData.features.tastebuddy.cons.map((con: string) => (
                   <li class="flex items-start gap-3 text-gray-300">
                     <span class="text-red-400 mt-1">•</span>
                     <span>{con}</span>
                   </li>
                 ))}
               </ul>
            </div>
          </div>

          <!-- Competitor Features -->
          <div class="bg-[#1C2513]/80 rounded-2xl p-8 border border-[#2A2D24]/30">
            <h3 class="text-2xl font-bold text-white mb-6 text-center">{comparisonData.competitor} Pros & Cons</h3>
            
            <div class="mb-6">
              <h4 class="text-lg font-semibold text-[#00CE31] mb-4">✓ Advantages</h4>
                             <ul class="space-y-2">
                 {comparisonData.features.competitor.pros.map((pro: string) => (
                   <li class="flex items-start gap-3 text-gray-300">
                     <span class="text-[#00CE31] mt-1">•</span>
                     <span>{pro}</span>
                   </li>
                 ))}
               </ul>
             </div>
             
             <div>
               <h4 class="text-lg font-semibold text-red-400 mb-4">⚠ Disadvantages</h4>
               <ul class="space-y-2">
                 {comparisonData.features.competitor.cons.map((con: string) => (
                   <li class="flex items-start gap-3 text-gray-300">
                     <span class="text-red-400 mt-1">•</span>
                     <span>{con}</span>
                   </li>
                 ))}
               </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Summary Section -->
      <section class="mb-16">
        <div class="bg-gradient-to-r from-[#00CE31]/20 to-[#00CE31]/10 rounded-3xl p-8 sm:p-12 text-center backdrop-blur-sm border border-[#00CE31]/20">
          <h2 class="text-3xl font-bold text-white mb-4">Summary</h2>
          <p class="text-xl text-gray-200 mb-6 max-w-3xl mx-auto">
            Both apps serve different needs. TasteBuddy focuses on AI-powered meal planning and recipe transformation, while {comparisonData.competitor} offers a more traditional recipe database approach.
          </p>
          <div class="flex flex-wrap justify-center gap-6">
            <a 
              href="https://apps.apple.com/app/id6554007741"
              class="btn-primary text-lg px-8 py-4"
              target="_blank" 
              rel="noopener noreferrer"
            >
              Try TasteBuddy
            </a>
          </div>
        </div>
      </section>

      <!-- FAQ Section -->
      <section class="mb-16">
        <h2 class="text-3xl font-bold text-white text-center mb-8">Frequently Asked Questions</h2>
        <div class="space-y-6">
          <div class="bg-[#1C2513]/80 rounded-2xl p-6 border border-[#2A2D24]/30">
            <h3 class="text-xl font-semibold text-white mb-3">What are the main differences between TasteBuddy and {comparisonData.competitor}?</h3>
            <p class="text-gray-300">TasteBuddy focuses on AI-powered meal planning and recipe transformation, while {comparisonData.competitor} emphasizes recipe discovery and community features. Choose based on whether you want intelligent planning or a large recipe database.</p>
          </div>
          
          <div class="bg-[#1C2513]/80 rounded-2xl p-6 border border-[#2A2D24]/30">
            <h3 class="text-xl font-semibold text-white mb-3">Can I import my recipes from {comparisonData.competitor}?</h3>
            <p class="text-gray-300">TasteBuddy can import recipes from photos, URLs, and screenshots. You can manually transfer recipes from {comparisonData.competitor} by sharing the recipe URL to TasteBuddy.</p>
          </div>
          
          <div class="bg-[#1C2513]/80 rounded-2xl p-6 border border-[#2A2D24]/30">
            <h3 class="text-xl font-semibold text-white mb-3">Which app is better for meal planning?</h3>
            <p class="text-gray-300">TasteBuddy offers more advanced AI meal planning features including personalized weekly plans and automatic shopping lists. {comparisonData.competitor} provides basic meal planning capabilities.</p>
          </div>
        </div>
      </section>

      <!-- Related Comparisons -->
      <section>
        <h2 class="text-2xl font-bold text-white text-center mb-8">More Recipe App Comparisons</h2>
        <div class="grid md:grid-cols-3 gap-6">
          <a href="/comparisons/tastebuddy-vs-allrecipes" class="bg-[#1C2513]/80 rounded-xl p-6 border border-[#2A2D24]/30 hover:border-[#00CE31]/30 transition-colors">
            <h3 class="text-lg font-semibold text-white mb-2">TasteBuddy vs AllRecipes</h3>
            <p class="text-gray-400 text-sm">Compare features and pricing</p>
          </a>
          <a href="/comparisons/tastebuddy-vs-paprika" class="bg-[#1C2513]/80 rounded-xl p-6 border border-[#2A2D24]/30 hover:border-[#00CE31]/30 transition-colors">
            <h3 class="text-lg font-semibold text-white mb-2">TasteBuddy vs Paprika</h3>
            <p class="text-gray-400 text-sm">Recipe manager comparison</p>
          </a>
          <a href="/comparisons/tastebuddy-vs-yummly" class="bg-[#1C2513]/80 rounded-xl p-6 border border-[#2A2D24]/30 hover:border-[#00CE31]/30 transition-colors">
            <h3 class="text-lg font-semibold text-white mb-2">TasteBuddy vs Yummly</h3>
            <p class="text-gray-400 text-sm">AI features comparison</p>
          </a>
        </div>
      </section>
    </article>
  </Main>
</Layout>

<style>
  .btn-primary {
    @apply bg-[#00CE31] hover:bg-[#00CE31]/80 text-black font-medium py-3 px-6 rounded-lg transition-all duration-300;
  }
</style> 